import{G as w,l as y,r as f,u as S,Y as $,Z as H,j as e,N as R,S as I,_ as M}from"./index-CC-10JTR.js";import{a as A}from"./index-BRxh214i.js";import{A as E,H as L,a as P}from"./AdminSidebar-DgeFAT8R.js";import{B,D as k}from"./Charts-D3GvYTrh.js";import{T as q}from"./TableHOC-BhCHjo4-.js";import"./index-Bs-J1ZhJ.js";function D(a){return w({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"},child:[]}]})(a)}const F=[{Header:"Id",accessor:"_id"},{Header:"Quantity",accessor:"quantity"},{Header:"Discount",accessor:"discount"},{Header:"Amount",accessor:"amount"},{Header:"Status",accessor:"status"}],G=({data:a=[]})=>q(F,a,"transaction-box","Top Transaction")(),O="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSJxA5cTf-5dh5Eusm0puHbvAhOrCRPtckzjA&usqp",K=()=>{var b;const{user:a}=y(t=>t.userReducer),[n,r]=f.useState(""),l=S(),{isLoading:g,data:j,isError:N}=$(a==null?void 0:a._id),{data:h}=H(a==null?void 0:a._id),s=j==null?void 0:j.stats,o=n.trim().toLowerCase();if(N)return e.jsx(R,{to:"/admin/dashboard"});const C=((b=s==null?void 0:s.latestTransaction)==null?void 0:b.filter(t=>{var m;const i=String(t._id).toLowerCase().includes(o),c=(m=t.orderItems)==null?void 0:m.some(u=>{var d;return(d=u.name)==null?void 0:d.toLowerCase().includes(o)});return i||c}))||[];return f.useEffect(()=>{var c,m;if(!o)return;const t=(c=s==null?void 0:s.latestTransaction)==null?void 0:c.find(u=>{var v;const d=String(u._id).toLowerCase()===o,T=(v=u.orderItems)==null?void 0:v.some(_=>{var p;return((p=_.name)==null?void 0:p.toLowerCase())===o});return d||T});if(t){l(`/admin/transaction/${t._id}`);return}const i=(m=h==null?void 0:h.products)==null?void 0:m.find(u=>{var d;return((d=u.name)==null?void 0:d.toLowerCase())===o});i&&l(`/admin/product/${i._id}`)},[o,s==null?void 0:s.latestTransaction,h==null?void 0:h.products,l]),e.jsxs("div",{className:"admin-container",children:[e.jsx(E,{}),e.jsx("main",{className:"dashboard",children:g?e.jsx(I,{length:20}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bar",children:[e.jsx(D,{}),e.jsx("input",{type:"text",placeholder:"Name or Transaction ID",value:n,onChange:t=>r(t.target.value),className:"search-input"}),e.jsx(M,{}),e.jsx("img",{src:(a==null?void 0:a.photo)||O,alt:"User"})]}),e.jsxs("section",{className:"widget-container",children:[e.jsx(x,{percent:s.changePercent.revenue,amount:!0,value:s.count.revenue,heading:"Revenue",color:"rgb(0, 115, 255)"}),e.jsx(x,{percent:s.changePercent.user,value:s.count.user,color:"rgb(0 198 202)",heading:"Users"}),e.jsx(x,{percent:s.changePercent.order,value:s.count.order,color:"rgb(255 196 0)",heading:"Transactions"}),e.jsx(x,{percent:s.changePercent.product,value:s.count.product,color:"rgb(76 0 255)",heading:"Products"})]}),e.jsxs("section",{className:"graph-container",children:[e.jsxs("div",{className:"revenue-chart",children:[e.jsx("h2",{children:"Revenue & Transaction"}),e.jsx(B,{data_2:s.chart.order,data_1:s.chart.revenue,title_1:"Revenue",title_2:"Transaction",bgColor_1:"rgb(0, 115, 255)",bgColor_2:"rgba(53, 162, 235, 0.8)"})]}),e.jsxs("div",{className:"dashboard-categories",children:[e.jsx("h2",{children:"Inventory"}),e.jsx("div",{children:s.categoryCount.map(t=>{const[i,c]=Object.entries(t)[0];return e.jsx(Q,{value:c,heading:i,color:`hsl(${c*4}, ${c}%, 50%)`},i)})})]})]}),e.jsxs("section",{className:"transaction-container",children:[e.jsxs("div",{className:"gender-chart",children:[e.jsx("h2",{children:"Gender Ratio"}),e.jsx(k,{labels:["Female","Male"],data:[s.userRatio.female,s.userRatio.male],backgroundColor:["hsl(340, 82%, 56%)","rgba(53, 162, 235, 0.8)"],cutout:90}),e.jsx("p",{children:e.jsx(A,{})})]}),e.jsx(G,{data:C})]})]})})]})},x=({heading:a,value:n,percent:r,color:l,amount:g=!1})=>e.jsxs("article",{className:"widget",children:[e.jsxs("div",{className:"widget-info",children:[e.jsx("p",{children:a}),e.jsx("h4",{children:g?`â‚¹${n}`:n}),r>0?e.jsxs("span",{className:"green",children:[e.jsx(L,{})," +",`${r>1e4?9999:r}%`]}):e.jsxs("span",{className:"red",children:[e.jsx(P,{})," ",`${r<-1e4?-9999:r}%`]})]}),e.jsx("div",{className:"widget-circle",style:{background:`conic-gradient(
          ${l} ${Math.abs(r)/100*360}deg,
          rgb(255, 255, 255) 0
        )`},children:e.jsxs("span",{style:{color:l},children:[r>0&&`${r>1e4?9999:r}%`,r<0&&`${r<-1e4?-9999:r}%`]})})]}),Q=({color:a,value:n,heading:r})=>e.jsxs("div",{className:"category-item",children:[e.jsx("h5",{children:r}),e.jsx("div",{children:e.jsx("div",{style:{backgroundColor:a,width:`${n}%`}})}),e.jsxs("span",{children:[n,"%"]})]});export{K as default};
