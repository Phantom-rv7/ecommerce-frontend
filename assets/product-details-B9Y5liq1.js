import{G as v,r as a,j as e,i as ee,k as te,b as se,u as re,l as oe,m as ie,n as ne,o as ce,p as le,q as ae,s as de,t as he,N as ue,v as pe,w as xe,V as c,S as d,x as me,y as ge,c as je,z as fe,A as ve,B as ye}from"./index-CC-10JTR.js";import{B as N,I as we,$ as be}from"./index-hBWeTPcp.js";import{r as I}from"./feautures-W7BkNmvr.js";import{B as ke}from"./index-BRxh214i.js";function Re(r){return v({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(r)}const f=({title:r,children:i})=>{const[l,o]=a.useState(!1);return e.jsx("div",{className:"product-info-accordion",children:e.jsxs("div",{className:"accordion",children:[e.jsxs("button",{className:"accordion__button",onClick:()=>o(!l),children:[r,e.jsx("span",{children:l?"âˆ’":"+"})]}),l&&e.jsx("div",{className:"accordion__content",children:i})]})})};function Ce(r){return v({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"},child:[]}]})(r)}function Se(r){return v({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z"},child:[]}]})(r)}const T=({value:r=0})=>{const{Ratings:i}=N({IconFilled:e.jsx(Ce,{}),IconOutline:e.jsx(Se,{}),value:r,styles:{fontSize:"1.75rem",color:"coral",justifyContent:"flex-start"}});return e.jsx(i,{})},Fe={items:[]},_e=ee({name:"favorites",initialState:Fe,reducers:{setFavorites:(r,i)=>{r.items=i.payload},addToFavorites:(r,i)=>{r.items.push(i.payload)},removeFromFavorites:(r,i)=>{r.items=r.items.filter(l=>l._id!==i.payload)}}}),{setFavorites:Oe,addToFavorites:Le,removeFromFavorites:Ie}=_e.actions,Be=()=>{var _,L;const{id:r}=te(),i=se(),l=re(),{user:o}=oe(s=>s.userReducer),{isLoading:W,isError:z,data:t}=ie(r),h=ne(r),[P,y]=a.useState(!1),[u,w]=a.useState(1),[p,A]=a.useState("M"),x=a.useRef(null),[b,k]=a.useState(""),[D,M]=a.useState(!1),R=((_=h.data)==null?void 0:_.reviews)||[],m=R.length,[C,S]=a.useState(!1),{data:g}=ce(o==null?void 0:o._id,{skip:!(o!=null&&o._id)}),[O]=le(),[B]=ae();a.useEffect(()=>{if(!Array.isArray(g)||!t||!t.product||typeof t.product._id!="string")return;const s=g.some(n=>(n==null?void 0:n._id)===t.product._id);S(s)},[g,t]);const $=async()=>{if(!(t!=null&&t.product))return c.error("Product not found");if(!(o!=null&&o._id)){c.error("Login to use this feature"),l("/login",{state:{from:location.pathname},replace:!0});return}try{C?(await B({userId:o._id,productId:t.product._id}),i(Ie(t.product._id)),c("Removed from Favorites")):(await O({userId:o._id,productId:t.product._id}),i(Le(t.product)),c.success("Added to Favorites")),S(s=>!s)}catch{c.error("Failed to update favorites")}},E=m?R.reduce((s,n)=>s+n.rating,0)/m:0,[U]=de(),[q]=he(),j=s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase(),H=()=>{if((t==null?void 0:t.product.stock)===u)return c.error("Out of Stock");w(s=>s+1)},Q=()=>{u>1&&w(s=>s-1)},X=s=>{if(s.stock<1)return c.error("Out of Stock!");i(je(s)),c.success("Added to Cart")};if(z)return e.jsx(ue,{to:"/404"});const G=()=>{var s;(s=x.current)==null||s.showModal()},{Ratings:V,rating:Y,setRating:J}=N({IconFilled:e.jsx(fe,{}),IconOutline:e.jsx(ve,{}),value:0,selectable:!0,styles:{fontSize:"1.75rem",color:"coral",justifyContent:"flex-start",gap:"1px"}}),F=()=>{var s;(s=x.current)==null||s.close(),J(0),k("")},K=async s=>{s.preventDefault(),F();const n=await U({comment:b,rating:Y,userId:o==null?void 0:o._id,productId:r});M(!1),I(n,null,"")},Z=async s=>{const n=await q({reviewId:s,userId:o==null?void 0:o._id});I(n,null,"")};return e.jsxs("div",{className:"product-details",children:[e.jsx("button",{className:"home-btn",onClick:()=>l("/"),children:e.jsx(ke,{size:20})}),W?e.jsx(Te,{}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"product_heading",style:{fontWeight:"normal",fontFamily:"monospace",margin:"0rem"},children:t==null?void 0:t.product.name}),e.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem"},children:e.jsx("button",{onClick:$,className:"favorite-btn",children:C?e.jsx(pe,{color:"red",size:24}):e.jsx(xe,{size:24})})}),e.jsxs("main",{children:[e.jsxs("section",{className:"setsize",children:[e.jsx(we,{showThumbnails:!0,showNav:!1,onClick:()=>y(!0),images:(t==null?void 0:t.product.photos.map(s=>s.url))||[]}),P&&e.jsx(be,{NextButton:We,PrevButton:ze,setIsOpen:y,images:(t==null?void 0:t.product.photos.map(s=>s.url))||[]})]}),e.jsxs("section",{children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"-0.25rem"},children:[e.jsxs("h3",{style:{whiteSpace:"nowrap",color:"green"},children:[t==null?void 0:t.product.off,"%off"]}),e.jsxs("h3",{style:{whiteSpace:"nowrap",textDecoration:"line-through",color:"black",opacity:.6,fontWeight:"lighter"},children:["â‚¹",t==null?void 0:t.product.fakePrice]}),e.jsxs("h3",{style:{whiteSpace:"nowrap"},children:["â‚¹",t==null?void 0:t.product.price]})]}),e.jsxs("div",{className:"size-selector",children:[e.jsx("h2",{className:"size-selector__title",children:"Select Size"}),e.jsx("div",{className:"size-selector__options",children:["S","M","L","XL","XXL"].map(s=>e.jsx("button",{className:`size-selector__option ${p===s?"selected":""}`,onClick:()=>A(s),children:s},s))}),e.jsxs("p",{className:"size-selector__note",children:["Selected Size: ",e.jsx("strong",{style:{fontWeight:"bold"},children:p})]})]}),e.jsxs("div",{className:"delivery_details",style:{fontWeight:"normal",marginTop:"-1.5rem"},children:[e.jsx("h4",{children:"ðŸšš Delivery by 7-10 days"}),e.jsx("h4",{children:"ðŸ”„ 3-Day Return Policy"}),e.jsx("h4",{children:"âŒ Cancel Within 48 Hours"})]}),e.jsxs("article",{children:[e.jsxs("div",{children:[e.jsx("button",{onClick:Q,children:"âˆ’"}),e.jsx("span",{children:u}),e.jsx("button",{onClick:H,children:"+"})]}),e.jsx("button",{onClick:()=>{var s;return X({productId:t==null?void 0:t.product._id,name:t==null?void 0:t.product.name,price:t==null?void 0:t.product.price,stock:t==null?void 0:t.product.stock,materialType:t==null?void 0:t.product.materialType,size:p,quantity:u,fakePrice:t==null?void 0:t.product.fakePrice,off:t==null?void 0:t.product.off,photo:((s=t==null?void 0:t.product.photos[0])==null?void 0:s.url)||"",color:t==null?void 0:t.product.color,pocket:t==null?void 0:t.product.pocket,gsm:t==null?void 0:t.product.gsm,genderType:t==null?void 0:t.product.genderType})},children:"Add To Cart"})]}),e.jsx("div",{style:{marginTop:"0rem"},children:e.jsxs("p",{style:{fontWeight:"normal"},children:["ðŸ”—",e.jsxs("span",{style:{backgroundColor:"#f4f4f4",padding:"0.25rem 0.5rem",borderRadius:"5px",fontFamily:"monospace",cursor:"pointer",color:"#007bff",textDecoration:"underline"},onClick:()=>{const s=`${window.location.origin}/product/${t==null?void 0:t.product.slug}`,n="Check out this product on RetroRevival!";navigator.share?navigator.share({title:"RetroRevival Product",text:n,url:s}).then(()=>c.success("Shared successfully!")).catch(()=>c.error("Sharing failed")):(window.open(`https://wa.me/?text=${encodeURIComponent(n+" "+s)}`,"_blank"),window.open(`https://wa.me/?text=${encodeURIComponent(n+" "+s)}`,"_blank"),window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(s)}`,"_blank"),window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(s)}&text=${encodeURIComponent(n)}`,"_blank"),c("Instagram doesn't support direct link sharing. You can copy the link manually."),navigator.clipboard.writeText(s),c("Snapchat doesn't support direct link sharing. Link copied to clipboard."),navigator.clipboard.writeText(s))},children:[e.jsx("strong",{children:"Share this product:"})," "]})]})}),e.jsxs("div",{className:"product-info-accordion",children:[e.jsxs(f,{title:"Product Details",children:[e.jsxs("p",{style:{fontWeight:"normal"},children:[e.jsx("strong",{children:"Color: "}),e.jsx("strong",{children:t!=null&&t.product.color?j(t.product.color):""})]}),e.jsxs("p",{style:{fontWeight:"normal"},children:[e.jsx("strong",{children:"Fabric: "}),t!=null&&t.product.materialType?j(t.product.materialType):""]}),e.jsxs("p",{style:{fontWeight:"normal"},children:[e.jsx("strong",{children:"Pocket: "}),t!=null&&t.product.pocket?j(t.product.pocket):""]}),e.jsxs("p",{style:{fontWeight:"normal"},children:[e.jsx("strong",{children:"Wash: "}),"Machine Wash"]}),e.jsxs("p",{style:{fontWeight:"normal"},children:[e.jsx("strong",{children:"Airtex Fabric: "}),"Ultra-breathable, quick-drying, and lightweight."]}),(t==null?void 0:t.product.description)||"Crafted with care. 100% cotton, retro fit, breathable fabric."]}),e.jsxs(f,{title:"Vendor Details",children:["Sold by ",e.jsx("strong",{children:"RetroRevival"}),". We specialize in nostalgic designs and premium cotton tees.",e.jsx("br",{}),"ðŸ§µ ",e.jsx("strong",{children:"Fabric Quality:"})," All products are crafted from 100% breathable cotton, pre-shrunk for lasting comfort.",e.jsx("br",{}),"ðŸŽ¨ ",e.jsx("strong",{children:"Design Philosophy:"})," Inspired by retro pop culture, vintage typography, and timeless streetwear aesthetics.",e.jsx("br",{}),"ðŸ·ï¸ ",e.jsx("strong",{children:"Brand Promise:"})," Every tee is printed with fade-resistant inks and stitched for durability."]}),e.jsxs(f,{title:"Return & Exchange Policy",children:["We offer a hassle-free ",e.jsx("strong",{children:"3-day exchange window"})," from the date your order was placedâ€”no questions asked. We want you to love your tee!",e.jsx("br",{}),"ðŸ” ",e.jsx("strong",{children:"Note:"})," We currently support ",e.jsx("em",{children:"exchanges only"}),". Refunds and returns are not available at this time. ",e.jsx("br",{}),"ðŸ“¦ ",e.jsx("strong",{children:"Exchange Process:"})," Your exchange will be initiated ",e.jsx("em",{children:"only after"})," we receive the original product and verify its condition. Once approved, the new item will be dispatched and delivered within ",e.jsx("strong",{children:"8â€“10 days"}),", similar to your first order. ",e.jsx("br",{}),"âš ï¸ ",e.jsx("strong",{children:"Important:"})," If the returned product does not match the item originally sent (wrong design, used item, or tampered packaging), the exchange request will be ",e.jsx("strong",{children:"cancelled"}),". ",e.jsx("br",{}),"ðŸ“² ",e.jsx("strong",{children:"Need help?"})," For any exchange-related queries, feel free to connect with us via ",e.jsx("a",{href:"https://wa.me/917306638887",target:"_blank",children:e.jsx("strong",{style:{color:"green"},children:"WhatsApp"})}),"."]})]}),e.jsxs("em",{style:{display:"flex",gap:"1rem",alignItems:"center",marginTop:"1rem"},children:[e.jsx(T,{value:E}),"(",m," reviews)"]})]})]})]}),e.jsxs("dialog",{ref:x,className:"review-dialog",children:[e.jsx("button",{onClick:F,children:"X"}),e.jsx("h2",{children:"Write a Review"}),e.jsxs("form",{onSubmit:K,children:[e.jsx("textarea",{value:b,onChange:s=>k(s.target.value),placeholder:"Review..."}),e.jsx(V,{}),e.jsx("button",{disabled:D,type:"submit",children:"Submit"})]})]}),e.jsxs("section",{children:[e.jsxs("article",{children:[e.jsx("h2",{children:"Reviews"}),h.isLoading?null:e.jsx("button",{onClick:G,children:e.jsx(Re,{})})]}),e.jsx("div",{className:"reviews-container",children:h.isLoading?e.jsx(e.Fragment,{children:e.jsx(d,{width:"100%",length:3})}):(L=h.data)==null?void 0:L.reviews.map(s=>e.jsx(Ne,{review:s,userId:o==null?void 0:o._id,handleDeleteReview:Z},s._id))})]})]})},Ne=({review:r,userId:i,handleDeleteReview:l})=>e.jsxs("div",{className:"review",children:[e.jsx(T,{value:r.rating}),e.jsx("p",{children:r.comment}),e.jsxs("div",{children:[e.jsx("img",{src:r.user.photo,alt:"User"}),e.jsx("small",{children:r.user.name})]}),i===r.user._id&&e.jsx("button",{onClick:()=>l(r._id),children:e.jsx(ye,{})})]},r._id),Te=()=>e.jsxs("div",{style:{display:"flex",gap:"1rem",border:"1px solid #f1f1f1",height:"80vh"},children:[e.jsx("section",{style:{width:"100%",height:"100%"},children:e.jsx(d,{width:"100%",length:1})}),e.jsxs("section",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"4rem",padding:"2rem"},children:[e.jsx(d,{width:"100%",length:2}),e.jsx(d,{width:"100%",length:2}),e.jsx(d,{width:"100%",length:4}),e.jsx(d,{width:"100%",length:4})]})]}),We=({onClick:r})=>e.jsx("button",{onClick:r,style:{backgroundColor:"rgba(0,0,0,0.5)",color:"white",borderRadius:"10px",padding:"0.5rem",border:"none",cursor:"pointer",display:"grid",placeItems:"center"},children:e.jsx(ge,{})}),ze=({onClick:r})=>e.jsx("button",{onClick:r,style:{backgroundColor:"rgba(0,0,0,0.5)",color:"white",borderRadius:"10px",padding:"0.5rem",border:"none",cursor:"pointer",display:"grid",placeItems:"center"},children:e.jsx(me,{})});export{Be as default};
