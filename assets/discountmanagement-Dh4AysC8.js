import{l as v,k as C,u as $,C as l,V as u,r as i,j as e,S,B as N}from"./index-BBhJg91b.js";import{s as k}from"./index-Bocs1B56.js";import{a as x}from"./index-xsH4HHeE.js";import{A as w}from"./AdminSidebar-YKCcNd0v.js";import"./index-BksrHr4J.js";const D=()=>{const{user:t}=v(a=>a.userReducer),{id:s}=C(),j=$(),{loading:f,data:n,error:m}=k({url:`${l}/api/v1/payment/coupon/${s}?id=${t==null?void 0:t._id}`,key:"single-discount-code",dependencyProps:[s??"",(t==null?void 0:t._id)??""]});m&&u.error(m);const[g,o]=i.useState(!1),[p,r]=i.useState(""),[h,c]=i.useState(0),y=async a=>{a.preventDefault(),o(!0);try{const{data:d}=await x.put(`${l}/api/v1/payment/coupon/${s}?id=${t==null?void 0:t._id}`,{code:p,amount:h},{headers:{"Content-Type":"application/json"},withCredentials:!0});d.success&&(c(0),r(""),u.success(d.message),j("/admin/discount"))}catch{}finally{o(!1)}};i.useEffect(()=>{n&&(r(n.coupon.code),c(n.coupon.amount))},[n]);const b=async()=>{o(!0);try{const{data:a}=await x.delete(`${l}/api/v1/payment/coupon/${s}?id=${t==null?void 0:t._id}`,{withCredentials:!0});a.success&&u.success(a.message)}catch{}finally{o(!1)}};return e.jsxs("div",{className:"admin-container",children:[e.jsx(w,{}),e.jsx("main",{className:"product-management",children:f?e.jsx(S,{length:20}):e.jsx(e.Fragment,{children:e.jsxs("article",{children:[e.jsx("button",{className:"product-delete-btn",onClick:b,children:e.jsx(N,{})}),e.jsxs("form",{onSubmit:y,children:[e.jsx("h2",{children:"Manage"}),e.jsxs("div",{children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",placeholder:"Coupon Code",value:p,onChange:a=>r(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Price"}),e.jsx("input",{type:"number",placeholder:"Amount",value:h,onChange:a=>c(Number(a.target.value))})]}),e.jsx("button",{disabled:g,type:"submit",children:"Update"})]})]})})})]})};export{D as default};
