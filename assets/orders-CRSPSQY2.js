import{u as m,l as h,Q as x,r as o,V as p,j as s,S as u,L as j}from"./index-BBhJg91b.js";import{B as f}from"./index-U50_4n8K.js";const y=()=>{const c=m(),{user:a}=h(e=>e.userReducer),{isLoading:t,data:r,isError:i,error:l}=x(a==null?void 0:a._id);return o.useEffect(()=>{if(i){const e=l;p.error(e.data.message)}},[i,l]),o.useEffect(()=>{!t&&(r==null?void 0:r.orders.length)===0&&(p("No orders found. Redirecting to cart..."),c("/cart"))},[t,r,c]),s.jsxs("div",{className:"orders-container",children:[s.jsx("button",{className:"home-btn",onClick:()=>c("/"),children:s.jsx(f,{size:20})}),s.jsx("h1",{children:"My Orders"}),t?s.jsx(u,{length:21}):s.jsx("div",{className:"order-list",children:r==null?void 0:r.orders.map(e=>{var d;return s.jsxs("div",{className:"order-card",children:[s.jsxs("div",{className:"order-header",children:[s.jsxs("span",{className:"order-id",children:[s.jsx("strong",{children:"Order ID:"})," ",e._id]}),s.jsx("span",{className:`order-status ${e.status==="Processing"?"red":e.status==="Shipped"?"green":e.status==="Cancelled"?"gray":"purple"}`,children:e.status})]}),((d=e.paymentInfo)==null?void 0:d.id)&&s.jsxs("div",{className:"payment-info",children:[s.jsx("span",{className:"badge badge-success",children:"Paid via Razorpay"}),s.jsx("a",{href:`https://razorpay.com/payment/${e.paymentInfo.id}`,target:"_blank",rel:"noopener noreferrer",className:"receipt-link",children:"View Receipt"})]}),s.jsx("div",{className:"product-list",children:e.orderItems.map(n=>s.jsxs("div",{className:"product-item",children:[s.jsx("span",{className:"product-name",children:n.name}),s.jsxs("span",{className:"product-qty",children:["Qty: ",n.quantity]}),s.jsxs("span",{className:"product-price",children:["₹",n.price]})]},n._id))}),s.jsxs("div",{className:"order-footer",children:[s.jsxs("span",{className:"order-total",children:[s.jsx("strong",{children:"Total:"})," ₹",e.total]}),(a==null?void 0:a.role)==="admin"?s.jsx(j,{to:`/admin/transaction/${e._id}`,className:"manage-link",children:"Manage"}):s.jsx("span",{style:{color:"#aaa",fontSize:"0.85rem"}})]}),s.jsxs("div",{className:"order-help",children:[s.jsxs("p",{style:{fontSize:"0.85rem",color:"#555",marginTop:"0.5rem"},children:["For any queries or order deletion requests, please"," ",s.jsx("a",{href:"https://wa.me/917306638887",target:"_blank",rel:"noopener noreferrer",className:"contact-link",children:"contact us on WhatsApp"})," ","and include your Order ID."]}),s.jsxs("div",{className:"copy-order-id",children:[s.jsx("strong",{children:"Order ID:"})," ",s.jsx("span",{style:{userSelect:"all",backgroundColor:"#f5f5f5",padding:"2px 6px",borderRadius:"4px",fontFamily:"monospace",cursor:"text"},children:e._id})]})]})]},e._id)})})]})};export{y as default};
