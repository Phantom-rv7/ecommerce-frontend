import{l as C,k as H,u as M,m as U,r as l,a8 as z,a9 as B,j as e,N as O,S as R,B as Q}from"./index-BBhJg91b.js";import{L as X}from"./index-Bocs1B56.js";import{A as q}from"./AdminSidebar-YKCcNd0v.js";import{t as G,r as j}from"./feautures-Cdn5fYWJ.js";import"./index-BksrHr4J.js";const Z=()=>{var g,x;const{user:n}=C(t=>t.userReducer),b=H(),p=M(),{data:s,isLoading:y,isError:v}=U(b.id),[N,u]=l.useState(!1),[P]=z(),[S]=B(),a=X("multiple",20,10),[m,h]=l.useState(!1),[i,f]=l.useState({name:"",description:"",price:0,fakePrice:0,off:0,stock:0,category:"",materialType:"",size:"",color:"",pocket:"",gsm:"",genderType:""});l.useEffect(()=>{if(s!=null&&s.product){const{name:t,description:r,price:c,fakePrice:o,off:d,stock:k,category:I,materialType:E,size:F,color:L,genderType:T,pocket:A,gsm:_}=s.product;f({name:t,description:r,price:c,fakePrice:o,off:d,stock:k,category:I,materialType:E,size:F,color:L,pocket:A,gsm:_,genderType:T})}},[s]);const D=async t=>{t.preventDefault(),u(!0);try{const r=new FormData;Object.entries(i).forEach(([o,d])=>{r.set(o,d.toString())}),a.file&&a.file.length>0&&a.file.forEach(o=>{r.append("photos",o)});const c=await P({formData:r,userId:n==null?void 0:n._id,productId:s==null?void 0:s.product._id});j(c,p,"/admin/product")}catch(r){console.log(r)}finally{u(!1)}},w=async()=>{h(!0);try{const t=await S({userId:n==null?void 0:n._id,productId:s==null?void 0:s.product._id});j(t,p,"/admin/product")}catch(t){console.error("Delete failed:",t)}finally{h(!1)}};return v?e.jsx(O,{to:"/404"}):e.jsxs("div",{className:"admin-container",children:[e.jsx(q,{}),e.jsx("main",{className:"product-management",children:y?e.jsx(R,{length:20}):e.jsxs(e.Fragment,{children:[(s==null?void 0:s.product)&&e.jsxs("section",{children:[e.jsxs("strong",{children:["ID - ",s.product._id]}),e.jsx("img",{src:G((x=(g=s.product.photos)==null?void 0:g[0])==null?void 0:x.url),alt:"Product"}),e.jsx("p",{children:i.name}),i.stock>0?e.jsxs("span",{className:"green",children:[i.stock," Available"]}):e.jsx("span",{className:"red",children:"Not Available"}),e.jsxs("h3",{children:["â‚¹",i.price]})]}),e.jsxs("article",{children:[e.jsx("button",{className:"product-delete-btn",onClick:w,disabled:m,children:m?"Deleting...":e.jsx(Q,{})}),e.jsxs("form",{onSubmit:D,children:[e.jsx("h2",{children:"Manage"}),Object.entries(i).map(([t,r])=>e.jsxs("div",{children:[e.jsx("label",{children:t.charAt(0).toUpperCase()+t.slice(1)}),e.jsx("input",{type:typeof r=="number"?"number":"text",placeholder:t,value:r,onChange:c=>f(o=>({...o,[t]:typeof r=="number"?Number(c.target.value):c.target.value}))})]},t)),e.jsxs("div",{children:[e.jsx("label",{children:"Photos"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:a.changeHandler})]}),a.error&&e.jsx("p",{children:a.error}),a.preview&&e.jsx("div",{style:{display:"flex",gap:"1rem",overflowX:"auto"},children:a.preview.map((t,r)=>e.jsx("img",{src:t,alt:"New Image",style:{width:100,height:100,objectFit:"cover"}},r))}),e.jsx("button",{disabled:N,type:"submit",children:"Update"})]})]})]})})]})};export{Z as default};
