import{l as u,C as l,r,j as e,L as n,V as p,S as x,F as f}from"./index-CC-10JTR.js";import{s as j}from"./index-hBWeTPcp.js";import{A as _}from"./AdminSidebar-DgeFAT8R.js";import{T as h}from"./TableHOC-BhCHjo4-.js";import"./index-Bs-J1ZhJ.js";const b=[{Header:"Id",accessor:"_id"},{Header:"Code",accessor:"code"},{Header:"Amount",accessor:"amount"},{Header:"Action",accessor:"action"}],k=()=>{const{user:o}=u(s=>s.userReducer),{data:a,loading:d,error:t}=j({url:o!=null&&o._id?`${l}/api/v1/payment/coupon/all?id=${o._id}`:"",key:"discount-codes",dependencyProps:o!=null&&o._id?[o._id]:[]}),[c,i]=r.useState([]),m=h(b,c,"dashboard-product-box","Products",c.length>6)();return r.useEffect(()=>{a&&i(a.coupons.map(s=>({_id:s._id,code:s.code,amount:s.amount,action:e.jsx(n,{to:`/admin/discount/${s._id}`,children:"Manage"})})))},[a]),r.useEffect(()=>{t&&p.error(t)},[t]),e.jsxs("div",{className:"admin-container",children:[e.jsx(_,{}),e.jsx("main",{children:d?e.jsx(x,{length:21}):m}),e.jsx(n,{to:"/admin/discount/new",className:"create-product-btn",children:e.jsx(f,{})})]})};export{k as default};
