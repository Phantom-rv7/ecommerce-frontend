import{l as S,u as I,a1 as T,r as a,j as s,L as y,V as C,S as H}from"./index-BBhJg91b.js";import{A as b}from"./AdminSidebar-YKCcNd0v.js";import{T as v}from"./TableHOC-Cdp4oIjA.js";import"./index-BksrHr4J.js";const w=[{Header:"Transaction ID",accessor:"transactionId"},{Header:"Avatar",accessor:"user"},{Header:"Amount",accessor:"amount"},{Header:"Discount",accessor:"discount"},{Header:"Quantity",accessor:"quantity"},{Header:"Status",accessor:"status"},{Header:"Action",accessor:"action"}],N=()=>{const{user:c}=S(t=>t.userReducer),u=I(),{isLoading:h,data:i,isError:p,error:f,refetch:m}=T(c==null?void 0:c._id,{refetchOnMountOrArgChange:!0}),[o,g]=a.useState([]),[r,x]=a.useState("");a.useEffect(()=>{m()},[m]),a.useEffect(()=>{if(i){const t=i.orders.map(e=>{var n,l;return{transactionId:e._id,user:((n=e.user)==null?void 0:n.name)||"Unknown",amount:e.total,discount:e.discount,quantity:((l=e.orderItems)==null?void 0:l.length)||0,status:s.jsx("span",{className:e.status==="Processing"?"red":e.status==="Shipped"?"green":"purple",children:e.status}),action:s.jsx(y,{to:`/admin/transaction/${e._id}`,children:"Manage"})}});g(t)}},[i]);const d=a.useMemo(()=>{const t=r.trim().toLowerCase();return o.filter(e=>typeof e.transactionId=="string"&&e.transactionId.toLowerCase().includes(t))},[r,o]);a.useEffect(()=>{const t=r.trim().toLowerCase(),e=o.find(n=>typeof n.transactionId=="string"&&n.transactionId.toLowerCase()===t);e&&u(`/admin/transaction/${e.transactionId}`)},[r,o,u]);const j=a.useMemo(()=>v(w,d,"dashboard-product-box","Transactions",d.length>10),[d]);if(p){const t=f;C.error(t.data.message)}return s.jsxs("div",{className:"admin-container",children:[s.jsx(b,{}),s.jsx("main",{children:h?s.jsx(H,{length:21}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bar",children:s.jsx("input",{type:"text",placeholder:"Search by Transaction ID",value:r,onChange:t=>x(t.target.value),className:"search-input"})}),s.jsx(j,{})]})})]})};export{N as default};
